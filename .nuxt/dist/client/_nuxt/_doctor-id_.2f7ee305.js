import{_ as tt,a as Ce,b as De,c as st,d as Be}from"./clock.c29b0001.js";import{_ as ot}from"./Location.27e91d2d.js";import{_ as Le,u as fe,r as u,c as Se,a as se,o as n,b as i,d as e,t as o,e as L,F as V,f as z,g as p,h as O,i as t,w,j as oe,p as Me,k as Te,l as Ie,m as He,n as Oe,q as Ae,s as Ee,v as J,x as ue,y as _e,z as lt,A as nt,B as te,C as at,T as xe,D as ge,E as pe,G as it,H as we,I as rt,J as ct,K as dt,L as ut,M as _t}from"./entry.3613223e.js";import{n as U,_ as Fe}from"./Modal.ba9b7263.js";import{_ as Re}from"./info.c3e01190.js";import{_ as me,a as xt}from"./close.0c8aa01a.js";import{_ as Pe,a as We}from"./submitted-error.e70eff2a.js";const R=l=>(Me("data-v-1de92188"),l=l(),Te(),l),pt={class:"flex max-lg:flex-col gap-5"},mt={class:"p-4 bg-white rounded-2xl flex max-md:flex-col gap-4 max-md:mt-[130px] lg:grow"},ft={class:"relative h-fit w-fit shrink-0 max-md:self-center max-md:-mt-[142px]"},gt=["src","alt"],vt={key:0,class:"absolute bottom-0 left-0 w-full h-6 bg-red rounded-b-2xl flex-center text-sm text-white"},ht={class:"md:p-4 flex flex-col gap-4 flex-grow"},yt={class:"text-lg font-bold text-darkBlue leading-normal"},$t={class:"flex gap-4"},bt={class:"flex flex-col justify-between gap-1"},kt={class:"flex-y-center flex-wrap gap-1"},wt={key:0,xmlns:"http://www.w3.org/2000/svg",width:"2",height:"2",viewBox:"0 0 2 2",fill:"none"},Ct=R(()=>e("circle",{cx:"1",cy:"1",r:"1",fill:"#1D7ED8"},null,-1)),Dt=[Ct],Bt={class:"text-sm text-blue leading-normal"},Lt={class:"text-sm text-secondary leading-normal"},St=R(()=>e("div",{class:"bg-dividers w-[1px]"},null,-1)),Mt={class:"flex flex-col justify-between gap-1"},Tt={class:"flex-y-center gap-1"},It={class:"px-1 py-0.5 rounded bg-[#FEF9EB] text-xs font-bold text-yellow leading-normal"},Ht={class:"text-sm text-red leading-normal"},Ot={class:"flex flex-col gap-1"},At=["innerHTML"],Et=R(()=>e("span",{class:"w-[18px] h-[18px] flex-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"10",viewBox:"0 0 6 10",fill:"none"},[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.14863 9.18922C0.906045 8.99515 0.866714 8.64117 1.06078 8.39859L3.77967 4.99998L1.06078 1.60137C0.866714 1.35878 0.906045 1.00481 1.14863 0.81074C1.39121 0.616672 1.74519 0.656003 1.93926 0.898588L4.93926 4.64859C5.10361 4.85402 5.10361 5.14593 4.93926 5.35137L1.93926 9.10137C1.74519 9.34396 1.39121 9.38329 1.14863 9.18922Z",fill:"#E82C71"})])],-1)),Ft=R(()=>e("hr",{class:"border-dividers border-t"},null,-1)),Rt={class:"flex flex-col gap-1"},Pt={class:"text-xs text-secondary"},Wt={class:"flex-y-center gap-2"},Ut={key:0,class:"text-sm font-bold text-darkBlue leading-normal"},Vt={key:1,class:"text-sm font-bold text-darkBlue leading-normal"},zt={key:2,class:"flex-y-center gap-1"},jt={class:"text-xs text-red line-through leading-normal"},Nt={class:"bg-blue bg-opacity-10 rounded px-1 py-0.5 text-xs font-bold text-blue leading-normal"},Qt=R(()=>e("hr",{class:"border-dividers border-t"},null,-1)),qt=["href"],Zt={class:"flex gap-1 items-center w-3/5"},Gt={class:"flex flex-col gap-1"},Jt={class:"text-xs text-secondary line-clamp-1"},Kt={class:"text-sm text-darkBlue font-bold"},Yt={class:"flex gap-1 items-center"},Xt=R(()=>e("div",{class:"w-[18px] h-[18px] flex items-center justify-center"},[e("img",{src:st,alt:"metro"})],-1)),es={class:"flex flex-col gap-0.5"},ts={class:"text-xs text-secondary"},ss={class:"text-sm text-darkBlue font-bold leading-4"},os={class:"p-4 bg-white h-fit rounded-2xl lg:w-[392px] lg:shrink-0"},ls={key:0,class:"flex flex-col gap-4"},ns={class:"flex-y-center gap-1"},as=R(()=>e("img",{src:Be,alt:"clock"},null,-1)),is={class:"text-xs text-secondary leading-normal"},rs={class:"flex gap-2 z-0"},cs={key:1,class:"flex flex-col gap-4"},ds={class:"flex-y-center gap-1"},us=R(()=>e("img",{src:Be,alt:"clock"},null,-1)),_s={class:"text-xs text-secondary leading-normal"},xs={__name:"Detail",props:["doctor","selectedDateIndex","selectedHourIndex"],setup(l){const{t:h}=fe(),c=l.doctor.schedule.filter(r=>r.time.length>0),C=u([]),_=u([]),S=u(0),$=u(0);c.map((r,m)=>{const x=new Date(r.date),f=h(`weekdays[${x.getDay()}]`);C.value.push(`${f}, ${x.getDate().toString().padStart(2,"0")}`)}),D();const I=r=>{S.value=r.index,D()},M=r=>{$.value=r.index};function D(){if(!c.length)return;let r=[];c[S.value].time.map((m,x)=>{r.push(m.exactly_time.slice(0,5))}),_.value=r}const B=(r=!1)=>{let m=c[S.value].date;const x=new Date(m);return r?x.getMonth():x.getDate()},A=r=>{$.value=r},E=r=>{S.value=r,D()},P=Se(()=>_.value.length>0?h("bookTime",{time:_.value[$.value],date:h(`months[${B(!0)}]`,{day:B()})}):"Please select a date"),d=se("useSelectedDayQuery"),H=se("useSelectedHourQuery");return c.map((r,m)=>{r.date==d.value&&(S.value=m,D(),r.time.map((x,f)=>{x.id==H.value&&($.value=f)}))}),(r,m)=>{const x=Ce,f=ot,T=De,g=oe;return n(),i("div",pt,[e("div",mt,[e("div",ft,[e("img",{class:"rounded-2xl",width:"188",height:"236",src:l.doctor.avatar_300_375,alt:l.doctor.full_name},null,8,gt),l.doctor.experience?(n(),i("div",vt,[e("span",null,o(r.$t("experience",{year:l.doctor.experience})),1)])):L("",!0)]),e("div",ht,[e("p",yt,o(l.doctor.full_name),1),e("div",$t,[e("div",bt,[e("div",kt,[(n(!0),i(V,null,z(l.doctor.specialties,(b,Q)=>(n(),i("div",{class:"flex-y-center gap-1",key:b.key},[Q!=0?(n(),i("svg",wt,Dt)):L("",!0),e("p",Bt,o(b.name),1)]))),128))]),e("p",Lt,o(l.doctor.degree.name),1)]),St,e("div",Mt,[e("div",Tt,[p(x,{rating:l.doctor.average_rating},null,8,["rating"]),e("div",It,o(l.doctor.average_rating.toFixed(1)),1)]),e("p",Ht,o(r.$t("ratingsCount",{count:l.doctor.count_of_ratings})),1)])]),e("div",Ot,[e("div",{class:"line-clamp-3 md:line-clamp-6 text-sm text-darkBlue desc",innerHTML:l.doctor.description},null,8,At),e("div",{class:"text-sm text-red leading-normal flex cursor-pointer",onClick:m[0]||(m[0]=b=>r.$emit("descOpen"))},[O(o(r.$t("moreAbout"))+" ",1),Et])]),Ft,e("div",Rt,[e("p",Pt,o(r.$t("narxi"))+":",1),e("div",Wt,[l.doctor.discount_price?(n(),i("p",Ut,o(("numberWithSpaces"in r?r.numberWithSpaces:t(U))(l.doctor.discount_price))+" сум ",1)):(n(),i("p",Vt,o(("numberWithSpaces"in r?r.numberWithSpaces:t(U))(l.doctor.original_price))+" сум ",1)),l.doctor.discount_price?(n(),i("div",zt,[e("p",jt,o(("numberWithSpaces"in r?r.numberWithSpaces:t(U))(l.doctor.original_price))+" сум ",1),e("div",Nt," -"+o(Math.floor(100-l.doctor.discount_price*100/l.doctor.original_price))+"% ",1)])):L("",!0)])]),Qt,e("a",{href:`geo:${l.doctor.clinic.latitude},${l.doctor.clinic.longitude}`,class:"flex gap-8 items-center py-4 px-2 hover:bg-[#E5E9F0] active:bg-[#CCD3E1] rounded-xl"},[e("div",Zt,[p(f),e("div",Gt,[e("div",Jt,o(l.doctor.clinic.address),1),e("div",Kt,o(l.doctor.clinic.name),1)])]),e("div",Yt,[Xt,e("div",es,[e("div",ts,o(("usePrettyDistance"in r?r.usePrettyDistance:t(tt))(l.doctor.clinic.distance)),1),e("div",ss,o(l.doctor.clinic.metro.name),1)])])],8,qt)])]),e("div",os,[t(c).length?(n(),i("div",ls,[e("div",ns,[as,e("p",is,o(r.$t("dateTime"))+": ",1)]),e("div",rs,[p(T,{class:"w-2/3",uniqueID:"flicking-day",panels:t(C),onOnChange:I,onMoveThrough:E,selected:l.selectedDateIndex},null,8,["panels","selected"]),p(T,{class:"w-1/3",uniqueID:"flicking-hour",panels:t(_),onOnChange:M,onMoveThrough:A,selected:l.selectedHourIndex,"panel-index":t(H)},null,8,["panels","selected","panel-index"])]),p(g,{state:"primary",onClick:m[1]||(m[1]=b=>r.$emit("onApply",t(S),t($))),"is-disabled":!t(_).length},{default:w(()=>[O(o(t(P)),1)]),_:1},8,["is-disabled"])])):(n(),i("div",cs,[e("div",ds,[us,e("p",_s,o(r.$t("submitApplication[0]")),1)]),p(g,{state:"primary",onClick:m[2]||(m[2]=b=>r.$emit("onApply",null,null))},{default:w(()=>[O(o(r.$t("submitApplication[1]")),1)]),_:1})]))])])}}},ps=Le(xs,[["__scopeId","data-v-1de92188"]]),Ue=""+new URL("star_full.ac82dffd.svg",import.meta.url).href,ms=""+new URL("chatting.662bc76d.svg",import.meta.url).href,fs=""+new URL("user-avatar.5ce96821.svg",import.meta.url).href,gs=""+new URL("user-avatar-female.ce007b8f.svg",import.meta.url).href,vs=""+new URL("star_empty.9af7600d.svg",import.meta.url).href,hs={class:"bg-white rounded-2xl p-4 flex flex-col gap-4 lg:w-[calc(2/3*100%-10px)]"},ys={class:"flex-y-center gap-1"},$s={class:"text-lg text-darkBlue font-bold leading-normal"},bs=e("img",{src:Re,alt:"information"},null,-1),ks={class:"flex gap-4"},ws={class:"flex flex-col gap-1"},Cs={class:"text-xs text-secondary leading-normal"},Ds={class:"flex-y-center gap-1"},Bs=e("img",{src:Ue,alt:"Average rating"},null,-1),Ls={class:"text-darkBlue font-bold text-2xl leading-normal"},Ss=e("div",{class:"bg-dividers w-[1px]"},null,-1),Ms={class:"flex flex-col gap-1"},Ts={class:"text-xs text-secondary leading-normal"},Is={class:"flex-y-center gap-1"},Hs=e("img",{src:ms,alt:"Number of ratings"},null,-1),Os={class:"text-darkBlue font-bold text-2xl leading-normal"},As={class:"flex flex-col gap-4"},Es={key:0,class:"border-t border-dividers"},Fs={class:"flex flex-col gap-2"},Rs={class:"flex-y-center gap-2"},Ps={key:0,class:"rounded-full",src:fs,alt:"avatar"},Ws={key:1,class:"rounded-full",src:gs,alt:"avatar"},Us={class:"flex flex-col gap-1"},Vs={class:"text-sm font-bold text-darkBlue leading-normal"},zs={class:"text-xs text-secondary leading-normal"},js={class:"flex-y-center gap-1"},Ns={class:"flex gap-0.5"},Qs={class:"bg-yellow bg-opacity-10 rounded px-1 py-0.5 text-xs font-bold text-yellow"},qs=["innerHTML"],Zs={__name:"Comments",props:["doctor"],setup(l){const h=y=>{const c=new Date(y),C=c.getDate().toString().padStart(2,"0"),_=(c.getMonth()+1).toString().padStart(2,"0"),S=c.getFullYear();return`${C}.${_}.${S}`};return(y,c)=>{const C=oe;return n(),i("div",hs,[e("div",ys,[e("p",$s,o(y.$t("comments")),1),bs]),e("div",ks,[e("div",ws,[e("p",Cs,o(y.$t("overallRating"))+":",1),e("div",Ds,[Bs,e("p",Ls,o(l.doctor.average_rating.toFixed(1)),1)])]),Ss,e("div",Ms,[e("p",Ts,o(y.$t("numberRating"))+":",1),e("div",Is,[Hs,e("p",Os,o(l.doctor.count_of_ratings),1)])])]),p(C,{class:"font-normal",state:"secondary",onClick:c[0]||(c[0]=_=>y.$emit("comment"))},{default:w(()=>[O(o(y.$t("leaveComment")),1)]),_:1}),e("div",As,[(n(!0),i(V,null,z(l.doctor.ratings,(_,S)=>(n(),i("div",{class:"flex flex-col gap-4",key:_.id},[S!=0?(n(),i("hr",Es)):L("",!0),e("div",Fs,[e("div",Rs,[_.person.gender=="M"?(n(),i("img",Ps)):(n(),i("img",Ws)),e("div",Us,[e("p",Vs,o(_.person.first_name),1),e("p",zs,o(h(_.created_at)),1)])]),e("div",js,[e("div",Ns,[(n(!0),i(V,null,z(_.ball,$=>(n(),i("img",{src:Ue,alt:"star",key:$.key,width:"16",height:"16"}))),128)),(n(!0),i(V,null,z(5-_.ball,$=>(n(),i("img",{src:vs,alt:"star",key:$.key}))),128))]),e("span",Qs,o(y.$t(`rating[${_.ball-1}]`)),1)]),_.text?(n(),i("div",{key:0,class:"text-sm text-darkBlue leading-normal",innerHTML:_.text},null,8,qs)):L("",!0)])]))),128))])])}}},Gs=Zs,Js={key:0},Ks={class:"bg-white rounded-2xl p-4 fixed-center w-[calc(100%-32px)] max-w-[400px] relative z-[99] max-h-[80%] overflow-auto scrollbar-style"},Ys=e("p",{class:"text-2xl text-darkBlue font-bold leading-normal text-center"},"Оставьте отзыв",-1),Xs={class:"relative w-fit self-center"},eo={class:"flex-center gap-1.5 w-fit z-[1] relative"},to=["onClick"],so=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"48",viewBox:"0 0 49 48",fill:"none"},[e("path",{d:"M27.0793 7.18605L29.8607 13.0456C30.7057 14.8257 32.3548 16.0878 34.2952 16.3809L40.5146 17.3206C42.8223 17.6692 43.902 20.7409 42.1025 22.5646L37.6021 27.1256C36.2235 28.5228 35.6075 30.5181 35.928 32.461L36.9904 38.9012C37.4241 41.53 34.8268 43.2445 32.8239 42.1497L27.2611 39.109C25.5346 38.1653 23.4654 38.1653 21.7389 39.109L16.1761 42.1497C14.1732 43.2445 11.5759 41.53 12.0096 38.9012L13.072 32.461C13.3925 30.5181 12.7765 28.5228 11.3979 27.1256L6.89748 22.5646C5.09797 20.7409 6.17773 17.6692 8.4854 17.3206L14.7048 16.3809C16.6452 16.0878 18.2943 14.8257 19.1393 13.0456L21.9207 7.18606C22.9878 4.93798 26.0122 4.93798 27.0793 7.18605Z",stroke:"#F9A830","stroke-width":"3","stroke-linejoin":"round"})],-1),oo=[so],lo=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"49",height:"48",viewBox:"0 0 49 48",fill:"none"},[e("path",{fill:"#F9A830",d:"M20.5656 6.54282C22.175 3.1524 26.825 3.15239 28.4344 6.54282L31.2158 12.4024C31.8549 13.7487 33.0902 14.6819 34.5193 14.8978L40.7387 15.8374C44.3373 16.3811 45.7743 20.9791 43.1703 23.6182L38.6698 28.1792C37.6358 29.2272 37.1639 30.7371 37.408 32.2168L38.4704 38.6571C39.0852 42.3835 35.3232 45.2253 32.1045 43.4659L26.5417 40.4252C25.2635 39.7266 23.7365 39.7266 22.4583 40.4252L16.8955 43.4659C13.6768 45.2253 9.91485 42.3835 10.5296 38.6571L11.592 32.2168C11.8361 30.7371 11.3642 29.2272 10.3302 28.1792L5.82975 23.6182C3.22573 20.9791 4.66266 16.3811 8.26132 15.8374L14.4807 14.8978C15.9098 14.6819 17.1451 13.7487 17.7842 12.4024L20.5656 6.54282Z"}),e("path",{stroke:"#F9A830","stroke-width":"3","stroke-linejoin":"round",d:"M27.0793 7.18605L29.8607 13.0456C30.7057 14.8257 32.3548 16.0878 34.2952 16.3809L40.5146 17.3206C42.8223 17.6692 43.902 20.7409 42.1025 22.5646L37.6021 27.1256C36.2235 28.5228 35.6075 30.5181 35.928 32.461L36.9904 38.9012C37.4241 41.53 34.8268 43.2445 32.8239 42.1497L27.2611 39.109C25.5346 38.1653 23.4654 38.1653 21.7389 39.109L16.1761 42.1497C14.1732 43.2445 11.5759 41.53 12.0096 38.9012L13.072 32.461C13.3925 30.5181 12.7765 28.5228 11.3979 27.1256L6.89748 22.5646C5.09797 20.7409 6.17773 17.6692 8.4854 17.3206L14.7048 16.3809C16.6452 16.0878 18.2943 14.8257 19.1393 13.0456L21.9207 7.18606C22.9878 4.93798 26.0122 4.93798 27.0793 7.18605Z"})],-1),no=[lo],ao={key:0,width:"96",height:"96",src:Pe,alt:"submitted"},io={key:1,width:"96",height:"96",src:We,alt:"submitted error"},ro={key:2,class:"flex flex-col gap-2"},co=e("p",{class:"text-2xl font-bold leading-normal text-darkBlue text-center"},"Спасибо за ваш отзыв! ",-1),uo=e("p",{class:"text-sm text-darkBlue leading-normal text-center"}," Если вы записывались через наш сервис и были на приёме у врача, то мы учтём ваш отзыв в формировании рейтинга ",-1),_o=[co,uo],xo={key:3,class:"flex flex-col gap-2"},po=e("p",{class:"text-2xl font-bold leading-normal text-darkBlue text-center"},"Произошла ошибка ",-1),mo=e("p",{class:"text-sm text-darkBlue leading-normal text-center"}," Ваш номер отсутствует в списке пациентов, записавшихся на приём. ",-1),fo=[po,mo],go={__name:"CommentModal",props:{isOpen:{required:!0,type:Boolean},doctor:{required:!0,type:Number}},emits:["close"],setup(l,{emit:h}){const{locale:y}=fe(),c=Ie(),C=l,_=h,S=He(),$=u(!1),I=u(!1),M=u(!1),D=u(null),B=u(0),A=async()=>(await(c==null?void 0:c.recaptchaLoaded()),await(c==null?void 0:c.executeRecaptcha("yourActionHere"))),E=async m=>{if(!B.value)return;const x=ge("access"),T={recaptcha_token:await A(),ball:B.value,text:D.value.trim(),doctor:C.doctor},{data:g,error:b}=await pe(`${y.value}/ratings/create/`,{method:"POST",body:T,headers:{Authorization:`Bearer ${x.value}`}});M.value=!1,$.value=!0,g.value?I.value=!1:I.value=!0},P=()=>{$.value=!1,I.value=!1,_("close"),B.value=0,D.value=null},d=Oe(),H=Ae(),r=Ee();return J(()=>C.isOpen,m=>{S.value||(r.value={link:`/doctor/${C.doctor}`,action:"comment"},d.value="loginTitle.comment",H.value=m)}),J(H,m=>{m||_("close")}),(m,x)=>{const f=oe,T=Fe;return t(S)?(n(),i("div",Js,[p(xe,{name:"fade",mode:"out-in"},{default:w(()=>[l.isOpen?(n(),ue(T,{key:0,"is-open":l.isOpen,onClose:x[4]||(x[4]=g=>m.$emit("close"))},{body:w(()=>[e("div",Ks,[t($)?(n(),i("form",{key:1,onSubmit:x[2]||(x[2]=_e(()=>{},["prevent"])),class:"flex-y-center flex-col gap-4"},[t(I)?(n(),i("img",io)):(n(),i("img",ao)),t(I)?(n(),i("div",xo,fo)):(n(),i("div",ro,_o)),p(f,{class:"w-full",state:"primary",type:"submit",onClick:P},{default:w(()=>[O("Хорошо")]),_:1})],32)):(n(),i("form",{key:0,onSubmit:x[1]||(x[1]=_e(()=>{},["prevent"])),class:"flex flex-col gap-8"},[Ys,e("div",Xs,[e("div",eo,[(n(),i(V,null,z(5,g=>e("div",{key:g.key,onClick:b=>B.value=g,class:"w-12 h-12 flex-center cursor-pointer"},oo,8,to)),64))]),e("div",{class:"absolute top-0 left-0 flex-y-center gap-1.5 overflow-hidden transition-300 z-0",style:lt(`width: calc(20% * ${t(B)});`)},[(n(),i(V,null,z(5,g=>e("div",{key:g.key,class:"w-12 h-12 flex-center cursor-pointer"},no)),64))],4)]),nt(e("textarea",{name:"comment",id:"comment",placeholder:"Напишите комментарий","onUpdate:modelValue":x[0]||(x[0]=g=>te(D)?D.value=g:null),class:"w-full h-[140px] p-4 bg-bg rounded-lg text-sm text-darkBlue leading-normal placeholder:text-secondary resize-none outline-none"},null,512),[[at,t(D)]]),p(f,{state:"primary",type:"submit",onClick:E,"is-disabled":!t(B),"is-loading":t(M)},{default:w(()=>[O("Оставить отзыв")]),_:1},8,["is-disabled","is-loading"])],32)),e("img",{class:"absolute top-4 right-4 cursor-pointer",onClick:x[3]||(x[3]=g=>m.$emit("close")),src:me,alt:"close"})])]),_:1},8,["is-open"])):L("",!0)]),_:1})])):L("",!0)}}},vo=go;function ho(){let l=new Date().getTime(),h=typeof performance<"u"&&performance.now&&performance.now()*1e3||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){let c=Math.random()*16;return l>0?(c=(l+c)%16|0,l=Math.floor(l/16)):(c=(h+c)%16|0,h=Math.floor(h/16)),(y==="x"?c:c&3|8).toString(16)})}function yo(){const l=ge("device_id");return l.value||(l.value=ho()),l.value}const le=l=>(Me("data-v-5e62abda"),l=l(),Te(),l),$o={class:"container my-5"},bo={class:"flex flex-col gap-5"},ko={class:"bg-white rounded-2xl p-4 fixed-center w-[calc(100%-32px)] max-w-[804px] relative z-[99] max-h-[80%] overflow-auto scrollbar-style"},wo={class:"flex flex-col gap-8"},Co={class:"text-2xl text-darkBlue font-bold leading-normal text-center"},Do=["innerHTML"],Bo={key:0},Lo={class:"text-2xl text-darkBlue font-bold leading-normal text-center"},So={class:"flex gap-4"},Mo={class:"relative h-fit w-fit shrink-0 self-center"},To=["src","alt"],Io={key:0,class:"absolute bottom-0 left-0 w-full h-[18px] bg-red rounded-b-lg flex-center text-xs text-white"},Ho={class:"flex flex-col gap-2"},Oo={class:"text-base font-bold text-darkBlue leading-normal"},Ao={class:"flex flex-col gap-0.5"},Eo={class:"flex-y-center gap-1"},Fo={key:0,xmlns:"http://www.w3.org/2000/svg",width:"2",height:"2",viewBox:"0 0 2 2",fill:"none"},Ro=le(()=>e("circle",{cx:"1",cy:"1",r:"1",fill:"#1D7ED8"},null,-1)),Po=[Ro],Wo={class:"text-xs text-blue leading-normal"},Uo={class:"text-xs text-secondary leading-normal"},Vo={class:"flex-y-center flex-wrap gap-2"},zo={class:"flex-y-center gap-1"},jo={class:"px-1 py-0.5 rounded bg-[#FEF9EB] text-xs font-bold text-yellow leading-normal"},No={class:"text-sm text-red leading-normal"},Qo={class:"flex-y-center flex-wrap gap-1"},qo={class:"text-xs text-secondary"},Zo={class:"flex-y-center flex-wrap gap-2"},Go={key:0,class:"text-sm font-bold text-darkBlue leading-normal"},Jo={key:1,class:"text-sm font-bold text-darkBlue leading-normal"},Ko={key:2,class:"flex-y-center gap-1"},Yo={class:"text-xs text-red line-through leading-normal"},Xo={class:"bg-blue bg-opacity-10 rounded px-1 py-0.5 text-xs font-bold text-blue leading-normal"},el={class:"flex flex-col gap-4"},tl={class:"text-xs text-secondary leading-normal"},sl={class:"text-sm text-darkBlue leading-normal"},ol={class:"flex flex-col gap-2"},ll={class:"bg-bg rounded-lg px-4 py-2 h-12 flex flex-col gap-0.5 cursor-default"},nl={class:"text-xs text-secondary leading-normal"},al={class:"text-sm text-darkBlue leading-normal"},il={class:"flex-y-center gap-2"},rl=le(()=>e("img",{src:Re,alt:"info"},null,-1)),cl={class:"text-xs text-secondary"},dl={key:1,class:"flex flex-col gap-4"},ul={class:"text-2xl text-darkBlue font-bold leading-normal"},_l={class:"flex gap-2"},xl={key:2,class:"flex-y-center flex-col gap-4"},pl={key:0,class:"flex-y-center flex-col gap-4"},ml=le(()=>e("img",{width:"96",height:"96",src:Pe,alt:"submitted"},null,-1)),fl={class:"flex-y-center flex-col gap-2"},gl={class:"text-2xl font-bold text-darkBlue leading-normal text-center"},vl={class:"text-sm text-darkBlue leading-normal text-center"},hl={key:1,class:"flex-y-center flex-col gap-4"},yl=le(()=>e("img",{width:"96",height:"96",src:We,alt:"submitted error"},null,-1)),$l={class:"flex-y-center flex-col gap-2"},bl={class:"text-2xl font-bold text-darkBlue leading-normal text-center"},kl={class:"text-sm text-darkBlue leading-normal text-center"},wl={__name:"[doctor-id]",async setup(l){let h,y;const c=Ie(),{locale:C,t:_}=fe(),$=it().params.doctorid,I=u(!1),M=u(!1),D=u(!1),B=u(!1),A=u(!1),E=u(!1),P=u(!1),{data:d}=([h,y]=we(()=>pe(`/${C.value}/doctors/${$}/?device_id=${yo()}&format=json`)),h=await h,y(),h),H=d.value.schedule.filter(s=>s.time.length>0),r=s=>s==null?void 0:s.replace(/<[^>]*>?/gm,"").slice(0,160);rt({title:d.value.full_name||_("title"),description:r(d.value.description)||_("description"),ogTitle:d.value.full_name||_("title"),ogDescription:r(d.value.description)||_("description"),twitterTitle:d.value.full_name||_("title"),twitterDescription:r(d.value.description)||_("description"),twitterCard:"summary",ogImage:d.value.avatar||"/og-image.png",twitterImage:d.value.avatar||"/og-image.png"});const m=u([]),x=u([]);d.value.schedule.map((s,a)=>{const k=new Date(s.date),N=_(`weekdays[${k.getDay()}]`);m.value.push(`${N}, ${k.getDate().toString().padStart(2,"0")}`)});const f=ct();f.value||([h,y]=we(()=>ut(C.value)),await h,y());const T=u(null),g=u(null),b=u(null),Q=u(null);f.value&&(T.value=f.value.first_name,g.value=f.value.last_name,b.value=f.value.date_birthday?f.value.date_birthday.split("-").reverse().join("."):null,Q.value=f.value.phone_number);const K=u(!1),Y=u(!1),q=u(!1),X=(s="all")=>{if((s=="first"||s=="all")&&(!T.value||T.value.trim().length<3?K.value=!0:K.value=!1),(s=="last"||s=="all")&&(!g.value||g.value.trim().length<3?Y.value=!0:Y.value=!1),s=="birth"||s=="all")if(!b.value)q.value=!0;else if(b.value.length==10){b.value.substring(0,2),b.value.substring(3,5);const a=b.value.substring(6,10);q.value=!Ve(a)}else q.value=!1;return!K.value&&!Y.value&&!q.value},Ve=s=>!isNaN(new Date(s)),ne=u(null),ae=u(null),F=u(0),W=u(0),ve=u(null),ee=u(null),ie=(s,a)=>{var N,Z;j(),F.value=s,W.value=a,ne.value=H[s],ae.value=(N=ne.value)==null?void 0:N.time[a],M.value=!0,B.value=!1;const k=new Date((Z=ne.value)==null?void 0:Z.date);ve.value=k==null?void 0:k.getMonth(),ee.value=k==null?void 0:k.getDate()},ze=Oe(),he=Ae(),re=Ee();J(M,s=>{s||(B.value=!1),ce.value||(re.value={link:`/doctor/${$}`,action:"book"},ze.value="loginTitle.book",he.value=s)});const je=s=>{F.value=s.index,j()},Ne=s=>{W.value=s.index};function j(){if(!H.length)return;let s=[];return H[F.value].time.map((a,k)=>{s.push(a.exactly_time.slice(0,5))}),x.value=s,s}j();const Qe=async()=>(await(c==null?void 0:c.recaptchaLoaded()),await(c==null?void 0:c.executeRecaptcha("yourActionHere"))),qe=async()=>{if(!X("all"))return;P.value=!0;const s={recaptcha_token:await Qe()},{data:a,error:k}=await pe(ee.value?`${C.value}/receptions/update/${ae.value.id}/`:`${C.value}/receptions/create/${$}/`,{method:"POST",body:s,headers:{Authorization:`Bearer ${ge("access").value}`}});A.value=!0,a.value?(E.value=!1,P.value=!0):E.value=!0},Ze=s=>{W.value=s},Ge=s=>{F.value=s,j()},ye=(s=!1)=>{let a=H[F.value].date;const k=new Date(a);return s?k.getMonth():k.getDate()},Je=Se(()=>x.value.length>0?`Записаться ${_(`months[${ye(!0)}]`,{day:ye()})}, в ${x.value[W.value]}`:"Please select a date"),$e=()=>{A.value=!1,E.value=!1,M.value=!1},ce=He();J(()=>ce.value,s=>{s&&(setTimeout(()=>{re.value.action=="book"?M.value=!0:re.value.action=="comment"&&(D.value=!0)},1e3),f.value&&(T.value=f.value.first_name,g.value=f.value.last_name,b.value=f.value.date_birthday?f.value.date_birthday.split("-").reverse().join("."):null,Q.value=f.value.phone_number))}),J(he,s=>{s||(M.value=!1)});const Ke=se("useSelectedDayQuery"),be=se("useSelectedHourQuery");return dt(()=>{let s=0;H.map((a,k)=>{a.date==Ke.value&&(s=k)}),be.value&&ie(s,be.value)}),(s,a)=>{const k=ps,N=Gs,Z=Fe,Ye=Ce,de=xt,G=oe,ke=De,Xe=vo;return n(),i("div",$o,[e("div",bo,[p(k,{doctor:t(d),"selected-date-index":t(F),"selected-hour-index":t(W),onDescOpen:a[0]||(a[0]=v=>I.value=!0),onOnApply:ie},null,8,["doctor","selected-date-index","selected-hour-index"]),p(N,{doctor:t(d),onComment:a[1]||(a[1]=v=>D.value=!0)},null,8,["doctor"])]),p(xe,{name:"fade",mode:"out-in"},{default:w(()=>[t(I)?(n(),ue(Z,{key:0,"is-open":t(I),onClose:a[3]||(a[3]=v=>I.value=!1)},{body:w(()=>[e("div",ko,[e("div",wo,[e("p",Co,o(s.$t("about")),1),e("div",{class:"text-sm text-darkBlue whitespace-break-spaces desc",innerHTML:t(d).description},null,8,Do)]),e("img",{class:"absolute top-4 right-4 cursor-pointer",onClick:a[2]||(a[2]=v=>I.value=!1),src:me,alt:"close"})])]),_:1},8,["is-open"])):L("",!0)]),_:1}),t(ce)?(n(),i("div",Bo,[p(xe,{name:"fade",mode:"out-in"},{default:w(()=>[t(M)?(n(),ue(Z,{key:0,"is-open":t(M),onClose:a[14]||(a[14]=v=>M.value=!1)},{body:w(()=>[e("div",{class:_t([{"!max-w-[400px]":t(A)},"bg-white rounded-2xl p-4 fixed-center w-[calc(100%-32px)] max-w-[804px] relative z-[99] max-h-[80%] overflow-auto scrollbar-style"])},[!t(B)&&!t(A)?(n(),i("form",{key:0,onSubmit:a[11]||(a[11]=_e(()=>{},["prevent"])),class:"flex flex-col gap-8"},[e("p",Lo,o(s.$t("book")),1),e("div",So,[e("div",Mo,[e("img",{class:"rounded-lg",width:"100",height:"125",src:t(d).avatar_300_375,alt:t(d).full_name},null,8,To),t(d).experience?(n(),i("div",Io,[e("span",null,o(s.$t("experience",{year:t(d).experience})),1)])):L("",!0)]),e("div",Ho,[e("p",Oo,o(t(d).full_name),1),e("div",Ao,[e("div",Eo,[(n(!0),i(V,null,z(t(d).specialties,(v,et)=>(n(),i("div",{class:"flex-y-center gap-1",key:v.key},[et!=0?(n(),i("svg",Fo,Po)):L("",!0),e("p",Wo,o(v.name),1)]))),128))]),e("p",Uo,o(t(d).degree.name),1)]),e("div",Vo,[e("div",zo,[p(Ye,{rating:t(d).average_rating},null,8,["rating"]),e("div",jo,o(t(d).average_rating.toFixed(1)),1)]),e("p",No,o(s.$t("ratingsCount",{count:t(d).count_of_ratings})),1)]),e("div",Qo,[e("p",qo,o(s.$t("narxi"))+":",1),e("div",Zo,[t(d).discount_price?(n(),i("p",Go,o(("numberWithSpaces"in s?s.numberWithSpaces:t(U))(t(d).discount_price))+" "+o(s.$t("sum")),1)):(n(),i("p",Jo,o(("numberWithSpaces"in s?s.numberWithSpaces:t(U))(t(d).original_price))+" "+o(s.$t("sum")),1)),t(d).discount_price?(n(),i("div",Ko,[e("p",Yo,o(("numberWithSpaces"in s?s.numberWithSpaces:t(U))(t(d).original_price))+" "+o(s.$t("sum")),1),e("div",Xo," -"+o(Math.floor(100-t(d).discount_price*100/t(d).original_price))+"% ",1)])):L("",!0)])])])]),e("div",el,[t(ee)?(n(),i("div",{key:0,onClick:a[4]||(a[4]=v=>B.value=!0),class:"bg-bg rounded-lg px-4 py-2 h-12 flex flex-col gap-0.5 cursor-pointer hover:bg-[#DBE3F0] active:bg-[#C2CEE1]"},[e("p",tl,o(s.$t("dateTime")),1),e("p",sl,o(s.$t(`months[${t(ve)}]`,{day:t(ee)}))+", "+o(t(ae).exactly_time.slice(0,5)),1)])):L("",!0),p(de,{placeholder:"input.name",modelValue:t(T),"onUpdate:modelValue":a[5]||(a[5]=v=>te(T)?T.value=v:null),inputID:"first-name",type:"text",error:t(K)?"error.first":null,onOnBlur:a[6]||(a[6]=v=>X("first"))},null,8,["modelValue","error"]),p(de,{placeholder:"input.surname",modelValue:t(g),"onUpdate:modelValue":a[7]||(a[7]=v=>te(g)?g.value=v:null),inputID:"last-name",type:"text",error:t(Y)?"error.last":null,onOnBlur:a[8]||(a[8]=v=>X("last"))},null,8,["modelValue","error"]),p(de,{placeholder:"input.birth",modelValue:t(b),"onUpdate:modelValue":a[9]||(a[9]=v=>te(b)?b.value=v:null),inputID:"birth-date",type:"text","is-birth":!0,onOnBlur:a[10]||(a[10]=v=>X("birth")),error:t(q)?"error.birth":null},null,8,["modelValue","error"]),e("div",ol,[e("div",ll,[e("p",nl,o(s.$t("phoneToConfirm")),1),e("p",al,o(("numberWithSpaces"in s?s.numberWithSpaces:t(U))(`+998${t(Q)}`,!1)),1)]),e("div",il,[rl,e("p",cl,o(s.$t("phoneInfo")),1)])])]),p(G,{onClick:qe,state:"primary",type:"submit","is-loading":t(P)},{default:w(()=>[O(o(s.$t("booking")),1)]),_:1},8,["is-loading"])],32)):t(B)?(n(),i("div",dl,[e("p",ul,o(s.$t("filter.date")),1),e("div",_l,[p(ke,{class:"w-2/3",uniqueID:"flicking-day",panels:t(m),onOnChange:je,onMoveThrough:Ge,"panel-index":t(F)},null,8,["panels","panel-index"]),p(ke,{class:"w-1/3",uniqueID:"flicking-hour",panels:j(),onOnChange:Ne,onMoveThrough:Ze,"panel-index":t(W)},null,8,["panels","panel-index"])]),p(G,{state:"primary",onClick:a[12]||(a[12]=v=>ie(t(F),t(W))),"is-disabled":!j().length},{default:w(()=>[O(o(t(Je)),1)]),_:1},8,["is-disabled"])])):t(A)?(n(),i("div",xl,[t(E)?(n(),i("div",hl,[yl,e("div",$l,[e("p",bl,o(s.$t("bookError")),1),e("p",kl,o(s.$t("bookErrorInfo")),1)]),p(G,{class:"w-full",state:"primary",onClick:$e},{default:w(()=>[O(o(s.$t("retry")),1)]),_:1}),p(G,{class:"w-full font-normal",state:"secondary"},{default:w(()=>[O(o(s.$t("help")),1)]),_:1})])):(n(),i("div",pl,[ml,e("div",fl,[e("p",gl,o(s.$t("bookSuccess")),1),e("p",vl,o(s.$t("bookSuccessInfo")),1)]),p(G,{class:"w-full",state:"primary",onClick:$e},{default:w(()=>[O(o(s.$t("nice")),1)]),_:1})]))])):L("",!0),e("img",{class:"absolute top-4 right-4 cursor-pointer",onClick:a[13]||(a[13]=v=>M.value=!1),src:me,alt:"close"})],2)]),_:1},8,["is-open"])):L("",!0)]),_:1})])):L("",!0),p(Xe,{"is-open":t(D),onClose:a[15]||(a[15]=v=>D.value=!1),doctor:+t($)},null,8,["is-open","doctor"])])}}},Il=Le(wl,[["__scopeId","data-v-5e62abda"]]);export{Il as default};
